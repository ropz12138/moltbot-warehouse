{
  "id": "lark",
  "channels": ["lark"],
  "configSchema": {
    "type": "object",
    "properties": {
      "accounts": {
        "type": "object",
        "additionalProperties": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true,
              "description": "Enable this account"
            },
            "appId": {
              "type": "string",
              "description": "Lark App ID (cli_xxx)"
            },
            "appSecret": {
              "type": "string",
              "description": "Lark App Secret"
            },
            "encryptKey": {
              "type": "string",
              "description": "Encrypt key for event verification (optional)"
            },
            "domain": {
              "type": "string",
              "enum": ["lark", "feishu"],
              "default": "lark",
              "description": "API domain: lark (international) or feishu (China)"
            },
            "connectionMode": {
              "type": "string",
              "enum": ["websocket", "webhook"],
              "default": "websocket",
              "description": "Connection mode: websocket (enterprise) or webhook (individual accounts)"
            },
            "verificationToken": {
              "type": "string",
              "description": "Verification token for webhook events (from Lark app settings)"
            },
            "webhookPort": {
              "type": "number",
              "default": 3000,
              "description": "Port for webhook server (webhook mode only)"
            },
            "dmPolicy": {
              "type": "string",
              "enum": ["open", "pairing", "allowlist"],
              "default": "pairing",
              "description": "DM access policy"
            },
            "groupPolicy": {
              "type": "string",
              "enum": ["open", "allowlist", "disabled"],
              "default": "open",
              "description": "Group chat access policy"
            },
            "groupMentionGated": {
              "type": "boolean",
              "default": true,
              "description": "Require @mention in group chats"
            }
          }
        }
      }
    }
  },
  "uiHints": {
    "appSecret": {
      "label": "App Secret",
      "sensitive": true
    },
    "encryptKey": {
      "label": "Encrypt Key",
      "sensitive": true
    },
    "verificationToken": {
      "label": "Verification Token",
      "sensitive": true
    }
  }
}
